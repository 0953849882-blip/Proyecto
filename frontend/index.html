<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login OTP - Microservicios</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

  <script>
    window.APP_CONFIG = {
      authUrl: "http://127.0.0.1:9000",  
      appUrl: "./sistema.html"           
    };
  </script>

  <header class="top">
    <h1>üîê Acceso con OTP</h1>


    <div class="badge" id="tokenStatus">Token: NO</div>
  </header>

  <main class="grid">

    <section class="card">
      <h2>1) Registro</h2>
      <form id="formRegister" autocomplete="off">
        <label>Email</label>
        <input name="email" type="email" placeholder="correo@ejemplo.com" required />

        <label>Contrase√±a</label>
        <input name="password" type="password" placeholder="********" required minlength="4"/>

        <button type="submit">Crear usuario</button>
      </form>
      <p class="muted">Solo se registra una vez.</p>

      <p class="muted" style="margin-top:10px">
        Usuario demo sugerido: <b>luis@test.com</b> / <b>123456</b>
      </p>
    </section>

    <section class="card">
      <h2>2) Login</h2>
      <form id="formLogin" autocomplete="off">
        <label>Email</label>
        <input name="email" type="email" placeholder="correo@ejemplo.com" required />

        <label>Contrase√±a</label>
        <input name="password" type="password" placeholder="********" required minlength="4"/>

        <button type="submit">Validar credenciales</button>
      </form>
      <p class="muted">Si es correcto, pide el OTP.</p>
    </section>

    <!-- OTP -->
    <section class="card">
      <h2>3) OTP (4 min)</h2>

      <form id="formOtpRequest" autocomplete="off">
        <label>Email</label>
        <input name="email" type="email" placeholder="correo@ejemplo.com" required />
        <button type="submit">Pedir OTP</button>
      </form>

      <div class="otp-demo" id="otpDemoBox">
        <div><b>Demo OTP:</b> <span id="otpDemo">‚Äî</span></div>
        <div class="muted">En producci√≥n se env√≠a por correo/SMS.</div>
      </div>

      <form id="formOtpVerify" autocomplete="off">
        <label>Email</label>
        <input name="email" type="email" placeholder="correo@ejemplo.com" required />

        <label>C√≥digo OTP</label>
        <input name="code" type="text" placeholder="6 d√≠gitos" required minlength="6" maxlength="6" />

        <button type="submit">Verificar OTP y guardar token</button>
      </form>

      <div class="actions">
        <button id="btnGoApp" class="secondary" disabled>Ir al sistema</button>
        <button id="btnLogout" class="danger">Cerrar sesi√≥n</button>
      </div>

      <!-- Nota importante para que no te falle -->
      <p class="muted" style="margin-top:10px">
        Importante: abre este login desde <b>http://127.0.0.1:5173/</b> (no con file://) para evitar bloqueos del navegador.
      </p>
    </section>

  </main>

  <div id="toast"></div>

  <script src="./app.js"></script>
</body>
</html>
